(this["webpackJsonplocator-admin"]=this["webpackJsonplocator-admin"]||[]).push([[37],{1515:function(e,t,a){},2514:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),r=a(1437),o=a(1385),l=a(1988),i=a(1531),n=a(843),j=a.n(n),d=a(71),b=a.n(d),h=a(20),O=a(2497),x=a(2507),p=a(2498),m=a(2208),g=a(2209),u=a(2486),y=a(1991),f=a(1989),C=a(1);var k=e=>Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(O.a,{width:"100%",height:300,children:Object(C.jsxs)(x.a,{data:e.data,margin:{top:5,right:30,left:20,bottom:5},children:[Object(C.jsxs)("defs",{children:[Object(C.jsxs)("linearGradient",{id:"colorBar1",x1:"0",y1:"0",x2:"1",y2:"0",children:[Object(C.jsx)("stop",{offset:"1%",stopColor:"#1de9b6",stopOpacity:1}),Object(C.jsx)("stop",{offset:"99%",stopColor:"#1dc4e9",stopOpacity:1})]}),Object(C.jsxs)("linearGradient",{id:"colorBar2",x1:"0",y1:"0",x2:"1",y2:"0",children:[Object(C.jsx)("stop",{offset:"1%",stopColor:"#899FD4",stopOpacity:1}),Object(C.jsx)("stop",{offset:"99%",stopColor:"#A389D4",stopOpacity:1})]})]}),Object(C.jsx)(p.a,{strokeDasharray:"3 3"}),Object(C.jsx)(m.a,{dataKey:"date"}),Object(C.jsx)(g.a,{}),Object(C.jsx)(u.a,{}),Object(C.jsx)(y.a,{}),Object(C.jsx)(f.a,{dataKey:"count",fillOpacity:1,fill:"url(#colorBar1)",barSize:30})]})})}),w=(a(1515),a(1565)),D=a(1671),M=a.p+"static/media/green-marker.b68497c5.svg",S=a.p+"static/media/red-marker.cdf05647.svg";const{MarkerClusterer:v}=a(2210);var F=Object(D.a)(Object(D.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAJwujaucAqjiBhstqgj2ykhwCQGOFcVco&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(C.jsx)("div",{style:{height:"100%"}}),containerElement:Object(C.jsx)("div",{style:{height:"400px"}}),mapElement:Object(C.jsx)("div",{style:{height:"100%"}})}),Object(D.c)((()=>({isOpen:!1,selectedId:0})),{onMarkerClustererClick:()=>e=>{e.getMarkers()},onToggleOpen:e=>{let{isOpen:t,selectedId:a}=e;return e=>{t=!t,a=e}}}),w.withScriptjs,w.withGoogleMap)((e=>Object(C.jsx)(w.GoogleMap,{defaultZoom:9,defaultCenter:{lat:e.latitude,lng:e.longitude},children:Object(C.jsx)(v,{onClick:e.onMarkerClustererClick,averageCenter:!0,enableRetinaIcons:!0,gridSize:60,maxZoom:16,children:e.markers.map(((t,a)=>Object(C.jsx)(w.Marker,{label:t.door_company,icon:1==t.log_first_followup?M:S,position:{lat:parseFloat(t.door_latitude),lng:parseFloat(t.door_longitude)},children:e.selectedId==t.log_id&&Object(C.jsx)(w.InfoWindow,{onCloseClick:e.onToggleOpen,children:Object(C.jsx)("p",{children:t.door_company})})},t.log_id)))})})));t.default=()=>{const[e,t]=Object(s.useState)(null),[a,n]=Object(s.useState)(null),[d,O]=Object(s.useState)(!1),[x,p]=Object(s.useState)(!1),m=localStorage.getItem("authToken"),[g,u]=Object(s.useState)([]),[y,f]=Object(s.useState)([]),[w,D]=Object(s.useState)([]),[M,S]=Object(s.useState)(""),[v,T]=Object(s.useState)(""),N=Object(s.useCallback)((async e=>{let{fromDate:t,toDate:a}=e;p(!0);const s={fromDate:t?b()(t).format("YYYY-MM-DD HH:mm:ss"):"",toDate:a?b()(a).format("YYYY-MM-DD HH:mm:ss"):""};try{const e={method:"Post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Xtoken:m},body:JSON.stringify(s)};var c=h.a+"getReport";const t=await fetch(c,e),a=await t.json();D(a.mapData),S(parseFloat(a.mapData[0].door_latitude)),T(parseFloat(a.mapData[0].door_longitude)),u(a.primaryData),f(a.followupData),p(!1)}catch{}}),[]);Object(s.useEffect)((()=>{e&&a&&N({fromDate:e,toDate:a})}),[N,d]);const _=()=>Object(C.jsx)("div",{className:"divLoader",children:Object(C.jsx)("svg",{className:"svgLoader",viewBox:"0 0 100 100",width:"10em",height:"10em",children:Object(C.jsx)("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 42 0 0 1 10 50",fill:"#51CACC",transform:"rotate(179.719 50 51)",children:Object(C.jsx)("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 51;360 50 51",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})})})});return Object(C.jsxs)(c.a.Fragment,{children:[x?Object(C.jsx)(_,{}):null,Object(C.jsx)(r.a,{className:"mb-2",children:Object(C.jsx)(o.a,{md:12,children:Object(C.jsx)(l.a,{children:Object(C.jsxs)(l.a.Row,{children:[Object(C.jsx)(o.a,{xs:6}),Object(C.jsx)(o.a,{xs:2,children:Object(C.jsx)(j.a,{placeholderText:"From Date",selected:e,onChange:e=>{t(new Date(e))},className:"form-control",dateFormat:"dd-MM-yyyy",isClearable:!0,required:!0})}),Object(C.jsx)(o.a,{xs:2,children:Object(C.jsx)(j.a,{placeholderText:"To Date",selected:a,onChange:e=>{n(new Date(e))},className:"form-control",dateFormat:"dd-MM-yyyy",isClearable:!0,required:!0})}),Object(C.jsx)(o.a,{xs:2,children:Object(C.jsx)("button",{className:"text-capitalize btn btn-info",type:"button",onClick:()=>{O(!d)},children:Object(C.jsx)("i",{class:"fa fa-file","aria-hidden":"true",style:{margin:0}})})})]})})})}),Object(C.jsxs)(r.a,{children:[Object(C.jsx)(o.a,{xl:6,children:Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Header,{children:Object(C.jsx)(i.a.Title,{as:"h5",children:"Primary report"})}),Object(C.jsx)(i.a.Body,{className:"text-center",height:300,children:g.length>0?Object(C.jsx)(k,{data:g}):Object(C.jsx)("p",{children:"Select a date range to show the report"})})]})}),Object(C.jsx)(o.a,{xl:6,children:Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Header,{children:Object(C.jsx)(i.a.Title,{as:"h5",children:"Follow up report"})}),Object(C.jsx)(i.a.Body,{className:"text-center",height:300,children:y.length>0?Object(C.jsx)(k,{data:y}):Object(C.jsx)("p",{children:"Select a date range to show the report"})})]})})]}),Object(C.jsx)(r.a,{children:Object(C.jsx)(o.a,{xl:12,children:Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Header,{children:Object(C.jsx)(i.a.Title,{as:"h5",children:"Map View"})}),Object(C.jsx)(i.a.Body,{children:w.length>0?Object(C.jsx)(F,{markers:w,latitude:M,longitude:v}):Object(C.jsx)("p",{children:"Select a date range to show the map"})})]})})})]})}}}]);